(function(e){function t(t){for(var n,o,l=t[0],s=t[1],c=t[2],d=0,p=[];d<l.length;d++)o=l[d],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&p.push(r[o][0]),r[o]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);u&&u(t);while(p.length)p.shift()();return i.push.apply(i,c||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],n=!0,l=1;l<a.length;l++){var s=a[l];0!==r[s]&&(n=!1)}n&&(i.splice(t--,1),e=o(o.s=a[0]))}return e}var n={},r={app:0},i=[];function o(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=n,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(a,n,function(t){return e[t]}.bind(null,n));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/bpmn-modeler/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],s=l.push.bind(l);l.push=t,l=l.slice();for(var c=0;c<l.length;c++)t(l[c]);var u=s;i.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"238b":function(e,t,a){"use strict";var n=a("8ed9"),r=a.n(n);r.a},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("vue-bpmn")],1)},i=[],o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"containers"},[a("el-button-group",[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.saveFile("xml")}}},[e._v("下载xml")]),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.saveFile("svg")}}},[e._v("下载svg")])],1),a("div",{ref:"canvas",staticClass:"canvas"}),e.modeler?a("panel",{attrs:{modeler:e.modeler,users:e.users}}):e._e()],1)},l=[],s=(a("c975"),a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),a("96cf"),a("1da1")),c=a("c49e");n["default"].use(c["a"],{input:{size:"mini"},xform:{form:{labelPosition:"top",size:"mini"}}});var u=a("7024"),d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"propertyPanel",staticClass:"property-panel"},[e.element?a("taskPanel",{attrs:{element:e.element,modeler:e.modeler,users:e.users,groups:e.groups}}):e._e()],1)},p=[],m=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("x-form",{ref:"xForm",attrs:{config:e.formConfig},model:{value:e.formData,callback:function(t){e.formData=t},expression:"formData"}})],1)},f=[],b=(a("4160"),a("a15b"),a("ac1f"),a("5319"),a("1276"),a("5530")),h={props:{modeler:{type:Object,required:!0},element:{type:Object,required:!0},users:{type:Array,required:!0},groups:{type:Array,required:!0}},data:function(){return{userTypeOption:[{label:"指定人员",value:"assignee"},{label:"候选人员",value:"candidateUsers"},{label:"候选组",value:"candidateGroups"}],formData:{}}},computed:{formConfig:function(){var e=this;return{inline:!1,item:[{xType:"input",name:"id",label:"节点 id",disabled:!0},{xType:"input",name:"name",label:"节点名称"},{xType:"colorPicker",name:"color",label:"节点颜色"},{xType:"select",name:"userType",label:"人员类型",dic:e.userTypeOption},{xType:"select",name:"assignee",label:"指定人员",allowCreate:!0,filterable:!0,dic:e.users,show:"assignee"===e.formData.userType},{xType:"select",name:"candidateUsers",label:"候选人员",multiple:!0,allowCreate:!0,filterable:!0,dic:e.users,show:"candidateUsers"===e.formData.userType},{xType:"select",name:"candidateGroups",label:"候选组",multiple:!0,allowCreate:!0,filterable:!0,dic:e.groups,show:"candidateGroups"===e.formData.userType},{xType:"switch",name:"async",label:"异步",activeText:"是",inactiveText:"否"},{xType:"input",name:"priority",label:"优先级"},{xType:"input",name:"formKey",label:"表单标识key"},{xType:"input",name:"skipExpression",label:"跳过表达式"},{xType:"datePicker",type:"datetime",name:"dueDate",label:"到期时间"}]}}},watch:{"formData.name":function(e){this.updateProperties({name:e})},"formData.color":function(e){this.setColor({fill:null,stroke:e}),this.updateProperties({color:e})},"formData.userType":function(e){var t=this,a=["assignee","candidateUsers","candidateGroups"];a.forEach((function(e){delete t.element.businessObject.$attrs["flowable:".concat(e)],delete t.formData[e]}))},"formData.assignee":function(e){"assignee"===this.formData.userType&&this.updateProperties({"flowable:assignee":e})},"formData.candidateUsers":function(e){"candidateUsers"===this.formData.userType&&this.updateProperties({"flowable:candidateUsers":null===e||void 0===e?void 0:e.join(",")})},"formData.candidateGroups":function(e){"candidateGroups"===this.formData.userType&&this.updateProperties({"flowable:candidateGroups":null===e||void 0===e?void 0:e.join(",")})},"formData.async":function(e){e?this.updateProperties({"flowable:async":!0}):delete this.element.businessObject.$attrs["flowable:async"]},"formData.dueDate":function(e){e?this.updateProperties({"flowable:dueDate":e}):delete this.element.businessObject.$attrs["flowable:dueDate"]},"formData.formKey":function(e){e?this.updateProperties({"flowable:formKey":e}):delete this.element.businessObject.$attrs["flowable:formKey"]},"formData.priority":function(e){e?this.updateProperties({"flowable:priority":e}):delete this.element.businessObject.$attrs["flowable:priority"]},"formData.skipExpression":function(e){e?this.updateProperties({"flowable:skipExpression":e}):delete this.element.businessObject.$attrs["flowable:skipExpression"]},element:{handler:function(e){var t=Object(b["a"])(Object(b["a"])({},this.element.businessObject),this.element.businessObject.$attrs);for(var a in t)if(0===a.indexOf("flowable:")){var n,r=a.replace("flowable:","");if(t[r]=t[a],delete t[a],"candidateUsers"===r)t.userType="candidateUsers",t[r]=(null===(n=t[r])||void 0===n?void 0:n.split(","))||[];else if("candidateGroups"===r){var i;t.userType="candidateGroups",t[r]=(null===(i=t[r])||void 0===i?void 0:i.split(","))||[]}else"assignee"===r&&(t.userType="assignee")}this.formData=t},immediate:!0}},methods:{updateProperties:function(e){var t=this.modeler.get("modeling");t.updateProperties(this.element,e)},setColor:function(e){var t=this.modeler.get("modeling");t.setColor(this.element,e)}}},v=h,w=a("2877"),g=Object(w["a"])(v,m,f,!1,null,null,null),y=g.exports,x={name:"PropertyPanel",components:{taskPanel:y},props:{modeler:{type:Object,required:!0}},data:function(){return{element:null,form:{id:"",name:"",color:null},users:[{label:"张三",value:"zhangsan"},{label:"李四",value:"lisi"},{label:"王五",value:"wangwu"}],groups:[{label:"web组",value:"web"},{label:"java组",value:"java"},{label:"python组",value:"python"}],roles:[{value:"manager",label:"经理"},{value:"personnel",label:"人事"},{value:"charge",label:"主管"}]}},mounted:function(){this.handleModeler()},methods:{handleModeler:function(){var e=this;this.modeler.on("selection.changed",(function(t){e.element=null,e.$nextTick().then((function(){var a=t.newSelection[0];e.element=a}))}))}}},P=x,j=(a("d7ca"),Object(w["a"])(P,d,p,!1,null,null,null)),O=j.exports,D=(a("4de4"),a("d4ec")),T=a("bee2"),k=function(){function e(){Object(D["a"])(this,e),this.controls=[],this.init()}return Object(T["a"])(e,[{key:"init",value:function(){this.controls=[{action:"create.start-event",title:"开始"},{action:"create.intermediate-event",title:"中间"},{action:"create.end-event",title:"结束"},{action:"create.exclusive-gateway",title:"网关"},{action:"create.task",title:"任务"},{action:"create.user-task",title:"用户任务"},{action:"create.user-sign-task",title:"会签任务"},{action:"create.subprocess-expanded",title:"子流程"},{action:"create.data-object",title:"数据对象"},{action:"create.data-store",title:"数据存储"},{action:"create.participant-expanded",title:"扩展流程"},{action:"create.group",title:"分组"}]}},{key:"getControl",value:function(e){var t=this.controls.filter((function(t){return t.action===e}));return t[0]||{}}}]),e}(),M=(a("99af"),a("ec26")),N='<?xml version="1.0" encoding="UTF-8"?>\n<definitions xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:omgdc="http://www.omg.org/spec/DD/20100524/DC" xmlns:bioc="http://bpmn.io/schema/bpmn/biocolor/1.0" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:flowable="http://flowable.org/bpmn" targetNamespace="http://www.flowable.org/processdef">\n  <process id="T-'.concat(Object(M["a"])(),'" name="flow-').concat(Object(M["a"])(),'">\n    <startEvent id="startNode1" name="开始" />\n  </process>\n  <bpmndi:BPMNDiagram id="BPMNDiagram_flow">\n    <bpmndi:BPMNPlane id="BPMNPlane_flow" bpmnElement="T-2d89e7a3-ba79-4abd-9f64-ea59621c258c">\n      <bpmndi:BPMNShape id="BPMNShape_startNode1" bpmnElement="startNode1" bioc:stroke="">\n        <omgdc:Bounds x="240" y="200" width="30" height="30" />\n        <bpmndi:BPMNLabel>\n          <omgdc:Bounds x="55" y="237" width="23" height="14" />\n        </bpmndi:BPMNLabel>\n      </bpmndi:BPMNShape>\n    </bpmndi:BPMNPlane>\n  </bpmndi:BPMNDiagram>\n</definitions>\n'),_={components:{panel:O},data:function(){return{modeler:null,bpmData:new k,users:[{label:"张三",value:"zhangsan"},{label:"李四",value:"lisi"},{label:"王二",value:"wanger"},{label:"麻子",value:"mazi"}]}},mounted:function(){this.modeler=new u["a"]({container:this.$refs.canvas}),this.createNewDiagram()},methods:{createNewDiagram:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.modeler.importXML(N);case 3:e.adjustPalette(),t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),console.error(t.t0.message,t.t0.warnings);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()},adjustPalette:function(){try{var e=this.$refs.canvas,t=e.children[0].children[1].children[4],a={width:"130px",padding:"5px",background:"white",left:"20px",borderRadius:0};for(var n in a)t.style[n]=a[n];var r=t.children[0],i=r.children;for(var o in i[0].style["display"]="none",i){var l=i[o];for(var s in l.children){var c=l.children[s],u={display:"flex",justifyContent:"flex-start",alignItems:"center",width:"100%",padding:"5px"};if(c.className&&c.dataset&&-1!==c.className.indexOf("entry")){var d=this.bpmData.getControl(c.dataset.action);for(var p in c.innerHTML="<div style='font-size: 14px;font-weight:500;margin-left:15px;'>".concat(d["title"],"</div>"),u)c.style[p]=u[p]}}}}catch(m){console.log(m)}},saveFile:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var n,r,i,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(a.prev=0,"xml"!==e){a.next=9;break}return a.next=4,t.modeler.saveXML({format:!0});case 4:n=a.sent,r=n.xml,t.downloadFile("测试.bpmn20.xml",r,"application/xml"),a.next=14;break;case 9:return a.next=11,t.modeler.saveSvg({format:!0});case 11:i=a.sent,o=i.svg,t.downloadFile("图像",o,"image/svg+xml");case 14:a.next=19;break;case 16:a.prev=16,a.t0=a["catch"](0),console.log(a.t0);case 19:case"end":return a.stop()}}),a,null,[[0,16]])})))()},downloadFile:function(e,t,a){var n=document.createElement("a"),r=window.URL.createObjectURL(new Blob([t],{type:a}));n.href=r,n.download=e,n.click(),window.URL.revokeObjectURL(r)}}},B=_,C=(a("238b"),Object(w["a"])(B,o,l,!1,null,null,null)),$=C.exports,E={components:{VueBpmn:$}},U=E,L=Object(w["a"])(U,r,i,!1,null,"c021a24a",null),S=L.exports,G=a("5c96"),R=a.n(G);a("0fae");n["default"].config.productionTip=!1,n["default"].use(R.a),new n["default"]({render:function(e){return e(S)}}).$mount("#app")},6129:function(e,t,a){},"8ed9":function(e,t,a){},d7ca:function(e,t,a){"use strict";var n=a("6129"),r=a.n(n);r.a}});